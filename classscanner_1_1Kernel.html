<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Scanner: scanner::Kernel Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Scanner
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>scanner</b></li><li class="navelem"><a class="el" href="classscanner_1_1Kernel.html">Kernel</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classscanner_1_1Kernel-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">scanner::Kernel Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p>Interface for a unit of computation in a pipeline.  
 <a href="classscanner_1_1Kernel.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="kernel_8h_source.html">kernel.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for scanner::Kernel:</div>
<div class="dyncontent">
<div class="center"><img src="classscanner_1_1Kernel__inherit__graph.png" border="0" usemap="#scanner_1_1Kernel_inherit__map" alt="Inheritance graph"/></div>
<map name="scanner_1_1Kernel_inherit__map" id="scanner_1_1Kernel_inherit__map">
<area shape="rect" id="node2" href="classscanner_1_1VideoKernel.html" title="Kernel with support for frame and frame_info columns. " alt="" coords="5,80,152,107"/></map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for scanner::Kernel:</div>
<div class="dyncontent">
<div class="center"><img src="classscanner_1_1Kernel__coll__graph.png" border="0" usemap="#scanner_1_1Kernel_coll__map" alt="Collaboration graph"/></div>
<map name="scanner_1_1Kernel_coll__map" id="scanner_1_1Kernel_coll__map">
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structscanner_1_1Kernel_1_1Config.html">Config</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classscanner_1_1Kernel.html" title="Interface for a unit of computation in a pipeline. ">Kernel</a> parameters provided at instantiation.  <a href="structscanner_1_1Kernel_1_1Config.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a4837532efb82bb06903b8e7436f7f8df"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4837532efb82bb06903b8e7436f7f8df"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>Kernel</b> (const <a class="el" href="structscanner_1_1Kernel_1_1Config.html">Config</a> &amp;config)</td></tr>
<tr class="separator:a4837532efb82bb06903b8e7436f7f8df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a983fd890a5282d341aacdd84dcc69e73"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classscanner_1_1Kernel.html#a983fd890a5282d341aacdd84dcc69e73">validate</a> (proto::Result *result)</td></tr>
<tr class="memdesc:a983fd890a5282d341aacdd84dcc69e73"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if kernel arguments are valid.  <a href="#a983fd890a5282d341aacdd84dcc69e73">More...</a><br/></td></tr>
<tr class="separator:a983fd890a5282d341aacdd84dcc69e73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7fc6ff872855f9edc6456765ddf6a642"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classscanner_1_1Kernel.html#a7fc6ff872855f9edc6456765ddf6a642">reset</a> ()</td></tr>
<tr class="memdesc:a7fc6ff872855f9edc6456765ddf6a642"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resets ops when about to receive non-consecutive inputs.  <a href="#a7fc6ff872855f9edc6456765ddf6a642">More...</a><br/></td></tr>
<tr class="separator:a7fc6ff872855f9edc6456765ddf6a642"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee166f76d67a4bfbb2c3738bc01207af"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classscanner_1_1Kernel.html#aee166f76d67a4bfbb2c3738bc01207af">execute</a> (const BatchedColumns &amp;input_columns, BatchedColumns &amp;output_columns)=0</td></tr>
<tr class="memdesc:aee166f76d67a4bfbb2c3738bc01207af"><td class="mdescLeft">&#160;</td><td class="mdescRight">Runs the op on input rows and produces equal number of output rows.  <a href="#aee166f76d67a4bfbb2c3738bc01207af">More...</a><br/></td></tr>
<tr class="separator:aee166f76d67a4bfbb2c3738bc01207af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd94a7909c3eca198e04460c2891272f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abd94a7909c3eca198e04460c2891272f"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classscanner_1_1Kernel.html#abd94a7909c3eca198e04460c2891272f">set_profiler</a> (Profiler *profiler)</td></tr>
<tr class="memdesc:abd94a7909c3eca198e04460c2891272f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Do not call this function. <br/></td></tr>
<tr class="separator:abd94a7909c3eca198e04460c2891272f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:a381928ec67f8e94a49ef340dbb72d2c6"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a381928ec67f8e94a49ef340dbb72d2c6"></a>
static const i32&#160;</td><td class="memItemRight" valign="bottom"><b>UnlimitedDevices</b> = 0</td></tr>
<tr class="separator:a381928ec67f8e94a49ef340dbb72d2c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:aa00bb120cfbc269db4456e2a3c2c3a9b"><td class="memItemLeft" align="right" valign="top">Profiler *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classscanner_1_1Kernel.html#aa00bb120cfbc269db4456e2a3c2c3a9b">profiler_</a> = nullptr</td></tr>
<tr class="separator:aa00bb120cfbc269db4456e2a3c2c3a9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Interface for a unit of computation in a pipeline. </p>
<p>Kernels form the core of Scanner's interface. They are essentially functions that take rows of inputs and produce an equal number rows of outputs. Kernels are stateful operators that get reset when provided non-contiguous batches of input. See KernelFactory for how an op defines what hardware it can use for its computation. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="aee166f76d67a4bfbb2c3738bc01207af"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void scanner::Kernel::execute </td>
          <td>(</td>
          <td class="paramtype">const BatchedColumns &amp;&#160;</td>
          <td class="paramname"><em>input_columns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BatchedColumns &amp;&#160;</td>
          <td class="paramname"><em>output_columns</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Runs the op on input rows and produces equal number of output rows. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">input_columns</td><td>vector of columns, where each column is a vector of inputs and each input is a byte array </td></tr>
    <tr><td class="paramname">output_columns</td><td>op output, each column must have same length as the number of input rows</td></tr>
  </table>
  </dd>
</dl>
<p>Evaluate gets run on batches of inputs. At the beginning of a pipeline this is raw RGB images from the input images/videos, and after that the input becomes whatever was returned by the previous op.</p>
<p>Number of output columns must be non-zero. </p>

</div>
</div>
<a class="anchor" id="a7fc6ff872855f9edc6456765ddf6a642"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void scanner::Kernel::reset </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Resets ops when about to receive non-consecutive inputs. </p>
<p>Scanner tries to run ops on consecutive blocks of inputs to maximize the accuracy of stateful algorithms like video trackers. However, when the runtime provides an op with a non-consecutive input (because of work imbalance or other reasons), it will call reset to allow the op to reset its state. </p>

</div>
</div>
<a class="anchor" id="a983fd890a5282d341aacdd84dcc69e73"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void scanner::Kernel::validate </td>
          <td>(</td>
          <td class="paramtype">proto::Result *&#160;</td>
          <td class="paramname"><em>result</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks if kernel arguments are valid. </p>
<p>Only useful if your kernel has its own custom Protobuf arguments. </p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="aa00bb120cfbc269db4456e2a3c2c3a9b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Profiler* scanner::Kernel::profiler_ = nullptr</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The profiler allows an op to save profiling data for later visualization. It is not guaranteed to be non-null, so check before use. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>scanner/api/<a class="el" href="kernel_8h_source.html">kernel.h</a></li>
<li>scanner/api/kernel.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
